# 智慧AI营养餐厅项目页面功能总览文档（实操版）

本文档汇总了智慧AI营养餐厅前端 Flutter 应用各端页面结构及其功能点，覆盖用户端、营养师端、商家端、员工端和后台系统五大模块，所有功能均为项目实现范围内的正式功能。

---

## 📋 文档说明

### 页面命名规范
- **XXXListPage** - 列表展示页面
- **XXXDetailPage** - 详情查看页面
- **XXXEditorPage** - 编辑/创建页面
- **XXXManagerPage** - 管理功能页面
- **XXXEntryPage** - 入口/导航页面

### MVP开发优先级
- **P0（核心必备）**：登录、营养档案、AI推荐、订单支付、基础个人中心
- **P1（增值功能）**：会员体系、营养师咨询、论坛社区、商家管理
- **P2（扩展功能）**：社交分享、拼团秒杀、AI识别、连锁管理、数据分析

---

## 🔄 核心业务流程图

### 1. 新用户引导流程
```
SplashPage → LoginPage → OnboardingPage → MainPage → NutritionEntryPage 
                  ↓                                         ↓
             (老用户直接到MainPage)              NutritionProfileEditorPage
                                                           ↓
                                                 AIRecommendationChatPage
```

### 2. 订单与支付流程
```
HomePage/SearchPage → StoreDisplayPage → DishDetailPage → CartPage
                                                            ↓
                                                    OrderConfirmPage
                                                            ↓
                                                 (选择配送方式：配送/自提)
                                                    ↓              ↓
                                          AddressManagerPage   (自提信息确认)
                                                    ↓              ↓
                                                      PaymentPage
                                                            ↓
                                                   PaymentResultPage
                                                    ↓              ↓
                                          DeliveryTrackingPage  PickupCodeDisplayPage
                                                               (OrderDetailPage也可进入)
```

### 3. 营养师咨询流程
```
用户端入口：                              营养师端入口：
RecommendationDetailPage ─┐              ┌─ ConsultationMarketPage
OrderDetailPage ─────────┼──────────────┼─ MyConsultationsPage
UserProfilePage ─────────┘              └─ ClientListPage
                         ↓              ↓
                    ConsultationChatPage
                         ↓
                    ClientHealthTrendPage
```

### 4. 配送与核销流程
```
订单确认选择配送方式：
├─ 配送：PaymentResultPage → DeliveryTrackingPage → DeliverymanContactPage
└─ 自提：PaymentResultPage → PickupCodeDisplayPage
                                      ↓
                            PickupCodeScannerPage(商家扫码)
                                      ↓
                            PickupCodeManagementPage(商家管理)
```

### 5. 异常分支与容错处理

| 异常场景 | 触发页面 | 异常处理 | 用户引导 |
|---------|---------|---------|---------|
| AI推荐失败 | AIRecommendationChatPage | 显示错误提示、重试按钮、联系客服入口 | 引导查看历史推荐或手动搜索菜品 |
| 支付失败 | PaymentResultPage | 显示失败原因、重新支付、选择其他支付方式 | 引导检查余额或联系客服 |
| 审批被拒 | UserProfilePage通知 | 显示拒绝原因、重新提交入口、申请指导 | 引导完善资料或联系客服 |
| 无咨询单 | ConsultationMarketPage | 空状态提示、自动刷新、设置提醒 | 引导完善营养师资料提高接单率 |
| 网络异常 | 所有页面 | 断网提示、重试按钮、离线功能说明 | 引导检查网络或稍后重试 |
| 数据加载失败 | 列表页面 | 加载失败提示、重新加载、空状态展示 | 引导刷新或查看其他内容 |

---

## ✅ 一、用户端功能模块

### 1. 登录与身份识别 【P0-核心】

| 页面         | 功能说明                                     | 前置页面 | 后续页面 |
|------------|--------------------------------------------|---------|---------
| SplashPage | 启动页，判断是否已登录并跳转到 LoginPage 或 MainPage | App启动 | LoginPage/MainPage |
| LoginPage  | 手机验证码登录，未注册自动创建账号，无需注册页面       | SplashPage | OnboardingPage/MainPage |
| OnboardingPage | 新手引导页，介绍核心功能，引导创建首个营养档案    | LoginPage(首次) | MainPage |
| MainPage   | 主界面Tab结构：首页、推荐、论坛、订单、我的               | LoginPage/OnboardingPage | 各Tab页面 |
| UserProvider | 用户身份状态管理：是否为营养师、商家、员工角色切换与控制         | - | - |

### 2. 主导航与核心功能 【P0-核心】

| Tab名 | 页面                | 功能说明                             | 优先级 |
|-------|-------------------|--------------------------------------|-------|
| 首页    | HomePage          | Banner推荐、快捷入口、平台介绍等<br>**动态模块**：AI推荐卡片、优惠券推荐、营养师在线状态、新功能Banner | P0 |
| 推荐    | NutritionEntryPage | 检查是否有营养档案，进入推荐流程或新建档案       | P0 |
| 论坛    | ForumListPage     | 营养社区贴子浏览、分页、分类筛选等             | P1 |
| 订单    | OrderListPage     | 用户历史订单浏览，支持查看与反馈              | P0 |
| 我的    | UserProfilePage   | 展示用户资料、设置、客服入口、档案入口等         | P0 |

#### 2.1 首页动态模块设计 【P0-核心】

| 模块名称 | 显示条件 | 内容设计 | 点击跳转 | 运营目标 |
|---------|---------|---------|---------|---------|
| AI推荐卡片 | 用户已创建营养档案 | 显示"继续推荐"/"查看新推荐"，展示最近推荐缩略图 | AIRecommendationChatPage | 提升AI功能使用率 |
| 新用户引导卡片 | 用户未创建档案 | 展示"开始创建您的营养档案"，显示引导图标 | NutritionProfileEditorPage | 提升新用户转化率 |
| 优惠券推荐 | 有可用优惠券或活动 | 展示优惠力度、剩余时间、适用商家 | CouponCenterPage/FlashSalePage | 提升下单转化率 |
| 营养师在线状态 | 有营养师在线 | 显示在线营养师数量、专业领域标签 | ConsultationMarketPage | 提升咨询转化率 |
| 新功能Banner | 版本更新或新功能上线 | 突出新功能亮点、使用引导 | 对应功能页面 | 提升新功能采用率 |
| 订单状态提醒 | 有进行中订单 | 显示配送状态、预计送达时间 | OrderDetailPage | 提升用户满意度 |

### 3. AI推荐与营养档案模块 【P0-核心】

| 页面                        | 功能说明                                               | 优先级 | 导航来源 |
|---------------------------|------------------------------------------------------|--------|---------|
| NutritionEntryPage        | 判断是否有营养档案，无则跳转 NutritionProfileEditorPage | P0 | MainPage推荐Tab |
| NutritionProfileSelectPage | 查看/管理全部营养档案：进入AI推荐、编辑、删除、新建           | P0 | NutritionEntryPage |
| NutritionProfileEditorPage | 填写/编辑档案（含性别、年龄段、身高体重、营养目标、饮食偏好、地区、职业等） | P0 | NutritionEntryPage/SelectPage |
| AIRecommendationChatPage  | 和 AI 聊天获取推荐，支持多轮对话与结果保存<br>**异常处理**：AI失败时显示重试按钮、历史推荐入口、手动搜索引导 | P0 | NutritionProfileSelectPage |
| RecommendationRecordListPage | 浏览历史AI推荐记录，按档案与时间归类展示                      | P0 | UserProfilePage |
| RecommendationDetailPage  | 查看推荐详情，提供反馈入口、支持重新生成推荐<br>**导航增强**：添加"查看档案"按钮跳转到对应营养档案<br>**推荐强化**：显示推荐来源档案、推荐理由说明、重新推荐按钮、一键下单入口 | P0 | RecommendationRecordListPage |
| NutritionProfileDetailPage | 营养档案详情页，支持编辑、删除<br>**导航增强**：添加"查看推荐历史"按钮 | P1 | NutritionProfileSelectPage |

### 4. 订单与支付流程 【P0-核心】

| 页面              | 功能说明                                       | 优先级 |
|-----------------|----------------------------------------------|-------|
| CartPage        | 购物车管理：修改数量、删除、清空、跳转下单页                   | P0 |
| DeliveryMethodSelectionPage | 配送方式选择：堂食、外卖、自提，展示价格和时间差异 | P2 |
| OrderConfirmPage| 订单确认：填写地址、选择配送方式、提交订单                      | P0 |
| PaymentPage     | 订单支付：展示金额、选择方式、发起支付流程                      | P0 |
| PaymentResultPage| 展示支付结果：成功/失败，引导用户后续操作（查看订单、返回首页）<br>**异常处理**：支付失败时显示具体原因、重新支付按钮、更换支付方式、联系客服 | P0 |
| AddressManagerPage | 管理收货地址：添加、编辑、删除，用于下单流程选择                | P0 |
| DeliveryStatusPage | 配送状态管理：商家/员工标记"配送中"→"已送达" | P2 |

#### 4.1 订单异常状态处理 【P1-增值】

| 异常状态 | 处理页面/功能 | 处理流程 | 优先级 |
|---------|-------------|---------|-------|
| 商家取消订单 | OrderCancellationPage | 显示取消原因、自动退款流程、推荐其他商家 | P1 |
| 备餐失败 | OrderFailurePage | 跳转人工客服、展示其他可选商家、补偿措施 | P1 |
| 取餐超时 | PickupTimeoutPage | 自动关闭订单、提醒用户、退款处理 | P2 |
| 配送中断 | DeliveryInterruptionPage | 提供补偿措施入口（优惠券、投诉、重新配送） | P1 |

### 5. 论坛社区模块 【P1-增值】

| 页面               | 功能说明                                   | 优先级 |
|------------------|------------------------------------------|-------|
| ForumListPage    | 展示社区帖子列表，支持分页、标签筛选                    | P1 |
| ForumPostDetailPage | 查看帖子详情，支持评论、点赞、收藏<br>**内容监管**：支持举报帖子、举报评论 | P1 |
| NewForumPostPage | 发帖页面，支持图文编辑、添加标签                        | P1 |
| MyPostsPage      | 查看我发布的帖子、我收藏的帖子                        | P1 |

### 6. 用户个人中心模块

| 页面                      | 功能说明                                             | 优先级 |
|-------------------------|----------------------------------------------------|----|
| UserProfilePage         | 展示用户头像、昵称、账号设置、营养档案入口、客服入口、退出登录             | P0 |
| RoleEntryCard（组件）      | 动态显示身份入口（营养师认证、加盟申请、营养师工作台、我的店铺、餐厅工作台）     | P0 |
| NutritionistApplicationPage | 申请营养师页面，填写认证信息上传资质<br>**异常处理**：审批被拒时显示拒绝原因、重新提交入口、申请指导 | P1 |
| MerchantApplicationPage     | 申请加盟页面，填写商家资料提交申请<br>**异常处理**：审批被拒时显示拒绝原因、重新提交入口、申请指导 | P1 |
| SettingsPage              | 应用设置：通知权限、语言切换、版本信息                         | P0 |
| AccountSecurityPage       | 账号安全设置：绑定/更换手机号、修改密码、账号注销等<br>**数据权利**：支持账号注销、数据导出申请 | P0 |
| DataExportRequestPage     | 数据导出申请：营养档案、推荐历史、订单记录等个人数据下载 | P1 |
| AccountDeletionPage       | 账号注销流程：注销原因、数据清除说明、确认操作 | P1 |
| FavoritesPage             | 收藏夹：菜品、帖子、推荐等统一管理                          | P1 |
| SearchPage                | 全局搜索：搜索菜品、帖子、标签、商家等                        | P0 |
| HelpCenterPage            | 帮助中心：常见问题、联系客服、反馈渠道<br>**客服方式**：FAQ自助、在线客服、电话客服、邮件反馈、微信群 | P0 |
| FeedbackSubmitPage        | 用户反馈提交：问题分类、描述、截图上传、联系方式 | P1 |
| PrivacySettingsPage       | 隐私设置：数据权限、档案可见范围、推送通知等                    | P1 |
| NotificationCenterPage    | 消息中心：AI推荐、订单通知、系统公告集中展示<br>**分类管理**：Tab1系统通知、Tab2订单动态、Tab3私信、Tab4活动营销<br>**红点提示**：首页Tab、个人中心入口显示未读数量 | P0 |
| NotificationDetailPage    | 查看通知详情，标记已读                                | P0 |
| PersonalHealthAnalysisPage | 统一健康分析页：体重变化、营养目标达成率、推荐执行情况、趋势图表等 | P1 |
| MembershipPage            | 展示会员等级、成长值，开通与续费入口                         | P1 |
| PointsMallPage            | 积分商城：积分兑换商品、优惠券等<br>**使用场景**：支持订单抵扣、限积分用户活动参与 | P2 |
| PointsApplyPage           | 订单页面积分使用：选择积分抵扣金额、显示节省费用 | P2 |
| PointsEarningRulesPage    | 积分获取规则说明：消费阶梯、活动奖励、推荐返利等 | P2 |
| MembershipBenefitsPage    | 展示各等级会员专属权益说明                              | P1 |
| CouponCenterPage          | 优惠券中心：领取与管理用户优惠券                          | P1 |
| FlashSalePage             | 限时秒杀活动页，展示秒杀商品、库存倒计时                    | P2 |
| GroupBuyPage              | 拼团页面：发起/参与拼团、查看拼团状态                      | P2 |

#### 6.1 内容举报与分享功能 【P2-扩展】

| 页面/功能 | 功能说明 | 优先级 |
|---------|---------|-------|
| ReportContentDialog | 通用举报弹窗：选择举报类型、填写原因、提交举报 | P1 |
| ShareToSocialPage | 分享到社交平台：微信、朋友圈、小红书、微博等 | P2 |
| MiniProgramLandingPage | 小程序落地页：接收分享参数、跳转对应功能页面 | P2 |

---

## ✅ 二、营养师端功能模块

### 1. 营养师身份与工作台 【P1-增值】

| 页面                          | 功能说明                                         | 优先级 |
|-----------------------------|------------------------------------------------|-------|
| NutritionistMainPage（Tab结构） | 我的咨询、咨询大厅、我的客户、AI助手、我的资料           | P1 |
| MyConsultationsPage         | 当前咨询记录、进入详情页沟通                         | P1 |
| ConsultationMarketPage      | 接单大厅，查看用户需求、抢单接入<br>**异常处理**：无可接单时显示空状态、自动刷新、设置接单提醒、优化资料引导 | P1 |
| ClientListPage              | 历史服务客户列表、档案快速访问                        | P1 |
| AiAssistantPage             | 由 AI 辅助生成食谱、建议回复等                      | P1 |
| NutritionistProfilePage     | 营养师个人资料修改、状态切换、服务价格设置等               | P1 |
| ClientHealthTrendPage       | 客户健康趋势图、指标趋势变化、偏好分析等                  | P2 |
| ClientDetailPage            | 查看客户基本信息、历史咨询记录、AI推荐历史                  | P1 |
| VideoCallPage               | 视频咨询支持页面（可选）                             | P2 |
| ConsultationSchedulePage    | 管理咨询时间段、设置忙碌状态，自动接单或拒单机制              | P1 |
| IncomeSummaryPage           | 展示营养师累计收入、服务次数、评分、提现入口等信息              | P1 |

---

## ✅ 三、商家端功能模块

### 1. 商家与门店管理 【P1-增值】

| 页面                          | 功能说明                                         | 优先级 |
|-----------------------------|------------------------------------------------|-------|
| MerchantMainPage（Tab结构）     | 店铺看板、订单管理、库存管理、经营分析、资料管理           | P1 |
| MerchantDashboardPage         | 营业概览、销售排行、库存提醒                          | P1 |
| MerchantOrderListPage         | 查看用户订单、接单处理、打印小票                        | P1 |
| InventoryPage                 | 菜品库存录入、补货、出入库记录                         | P1 |
| BusinessStatsPage             | 销售数据、品类偏好、日/月趋势                          | P1 |
| StoreProfilePage              | 商家信息、员工管理、编辑资料                           | P1 |
| DishManagementPage            | 查看所有菜品、上下架、排序、筛选等                      | P1 |
| DishEditorPage                | 添加/编辑菜品名称、分类、图片、价格、库存、简介等信息         | P1 |
| NutritionInfoEditor           | 录入菜品的营养成分，如热量、蛋白质、脂肪、维生素等           | P1 |
| PromotionPage                 | 创建优惠活动（如满减、折扣券等），并展示活动状态              | P2 |
| DishCategoryEditor            | 添加/编辑菜品分类，便于前台展示与管理                     | P1 |
| EmployeeManagerPage           | 添加/删除员工账号，配置权限范围（点单、建档、库存、财务等） | P1 |
| StoreDisplayPage              | 用户端商家详情展示，包括评分、认证、营业时间、地址等              | P0 |
| ReviewManagerPage             | 商家可查看用户评价并进行回复或申诉管理                       | P2 |

### 2. 多门店与智能管理 【P2-扩展】

| 页面/功能                    | 功能说明                                         | 优先级 |
|-----------------------------|------------------------------------------------|-------|
| ChainHeadquartersPage        | 连锁品牌总部管理后台，支持多门店统一管理功能               | P2 |
| StoreSwitcher                | 支持当前商家账号下多门店快速切换视图                     | P2 |
| CrossStoreAnalyticsPage      | 展示各门店销售对比、库存数据、员工表现等汇总图表               | P2 |
| PredictiveInventoryPage      | AI预测库存变化趋势，自动提示补货与爆品趋势                   | P2 |

---

## ✅ 四、餐厅员工端功能模块

### 1. 餐厅员工（平板端）操作 【P1-增值】

| 页面                   | 功能说明                                             | 优先级 |
|----------------------|----------------------------------------------------|----|
| EmployeeEntryPage    | 快速下单 / 桌号点餐 / 协助档案填写 / 打单管理                 | P1 |
| QuickOrderPage       | 配合客户点菜下单                                    | P1 |
| BuildProfilePage     | 员工辅助顾客填写营养档案                                | P1 |
| QRCodeScanPage       | 支持客人扫码快速下单，桌号自动关联                          | P2 |
| PrintConfigPage      | 配置厨房打印机，选择打印格式与份数                          | P1 |
| BuildProfileWizard   | 多步骤引导顾客填写营养档案，提升用户体验                      | P1 |

### 2. 访客档案管理体系

| 页面/功能 | 功能说明 | 优先级 |
|---------|---------|-------|
| GuestProfileCreatePage | 员工为未注册用户创建临时档案，生成唯一ID | P2 |
| ProfileOwnershipTransferPage | 用户注册后，绑定并转移访客档案所有权 | P2 |
| GuestProfileManagerPage | 商家端管理所有访客档案，支持删除过期档案 | P2 |

### 3. 员工权限管理体系

| 权限类型 | 功能说明 | 配置方式 |
|---------|---------|---------|
| 点单权限 | 查看菜单、创建订单、修改订单 | 商家端EmployeeManagerPage配置 |
| 建档权限 | 帮助顾客创建/编辑营养档案<br>**访客档案**：支持为未注册用户创建临时档案，后续可绑定账号 | 商家端EmployeeManagerPage配置 |
| 库存权限 | 查看库存、修改库存、盘点 | 商家端EmployeeManagerPage配置 |
| 财务权限 | 查看营业额、处理退款 | 商家端EmployeeManagerPage配置 |
| 管理权限 | 管理其他员工、修改店铺设置 | 仅店长级别 |

---

## ✅ 五、后台管理系统功能模块（Web）

| 模块           | 页面                                                | 功能点                         | 权限等级 | 优先级 |
|--------------|---------------------------------------------------|------------------------------|---------|-------|
| 登录           | AdminLoginPage                                    | 管理员登录                       | 所有管理员 | P0 |
| 总览           | AdminDashboardPage                                | 用户/推荐/咨询/商家增长图表             | 所有管理员 | P0 |
| 用户管理         | UserListPage → UserDetailPage                       | 编辑、禁用、查看推荐记录等                 | 运营管理员 | P0 |
| 营养档案         | NutritionProfileListPage → NutritionProfileDetailPage | 数据结构管理、档案分析                   | 运营管理员 | P1 |
| 推荐记录         | RecommendationListPage → RecommendationDetailPage     | 查看 AI 推荐详情与反馈情况                | 运营管理员 | P1 |
| 商家管理         | StoreListPage → StoreDetailPage                       | 审核、封禁、库存查看                    | 运营管理员 | P0 |
| 营养师管理        | NutritionistListPage → NutritionistDetailPage         | 审核、查看咨询统计、用户反馈              | 运营管理员 | P1 |
| 咨询记录         | ConsultationListPage                                  | 查看营养师与用户对话历史                  | 客服人员 | P1 |
| 内容管理         | ForumPostListPage                                     | 帖子审核、标签管理                      | 运营管理员 | P1 |
| 内容监管         | CommentModerationPage                                 | 评论举报处理、违规内容审核、用户禁言等         | 运营管理员 | P1 |
| 违规处理         | ContentViolationReviewPage                            | 违规内容记录、处理结果、申诉管理             | 运营管理员 | P1 |
| 举报处理         | ReportedContentReviewPage                             | 用户举报内容审核、处理决定、反馈用户         | 运营管理员 | P1 |
| 权限/日志        | AdminAccessPage、AuditLogPage                          | 操作权限分配、审计跟踪                    | 超级管理员 | P1 |
| 操作日志         | AdminOperationLogPage                                 | 所有管理员操作行为日志记录，支持过滤与追溯          | 超级管理员 | P1 |
| 数据导出         | DataExportPage                                        | 导出指定数据为 CSV（如用户、订单、推荐等）        | 运营管理员 | P2 |
| 审核中心         | ApplicationReviewPage                                 | 统一审核中心：商家、营养师、员工、配送员等角色审核   | 运营管理员 | P1 |
| 版本管理         | AppVersionManagerPage                                 | 管理客户端版本、热更新推送                    | 超级管理员 | P2 |
| 系统监控         | SystemMonitorPage                                     | 后台接口请求统计、服务运行状态、异常日志等运维监控信息<br>**新增**：指标归因分析模块  | 超级管理员 | P2 |

### 5.1 指标归因分析模块 【P1-增值】

| 分析维度 | 关键指标 | 归因方向 | 应用场景 |
|---------|---------|---------|---------|
| AI推荐效果 | 推荐命中率、满意度、转化率 | 档案质量、算法参数、时间因素 | 优化推荐算法、改进档案填写 |
| 营销活动效果 | 参与率、转化率、复购率 | 用户画像、活动设计、渠道来源 | 优化活动策略、精准投放 |
| 用户转化漏斗 | 注册率、档案完成率、首单率 | 引导流程、页面设计、激励机制 | 优化用户体验、提升转化 |
| 商家经营分析 | 订单量、客单价、复购率 | 菜品质量、价格策略、服务质量 | 商家运营指导、平台优化 |
| 营养师服务 | 接单率、满意度、续费率 | 专业能力、响应速度、服务质量 | 营养师培训、匹配优化 |

---

## ✅ 智能化与会员营销模块

### 1. AI与智能分析 【P1/P2-增值/扩展】

| 页面/功能                   | 说明                                            | 优先级 |
|---------------------------|-----------------------------------------------|-------|
| RecommendationFeedbackStats| 汇总用户对推荐结果的反馈（满意/不满意），用于优化模型           | P1 |
| NutritionistAiKnowledgeBase| 营养师AI助手的知识库设置、上传资料、个性化提示设置等           | P2 |
| RecommendFieldExtension    | 在营养档案中增加更丰富字段（BMI、过敏史、运动频率等）以增强推荐精准度 | P1 |
| AIDishRecognitionPage      | 用户拍照识别餐盘内容，获取菜品热量与营养信息；适合用户记录/辅助点餐   | P2 |
| SmartMealPlannerPage       | 多人共餐智能配餐助手，根据多个营养档案生成一桌合理套餐            | P2 |

### 2. 会员与营销活动 【P1/P2-增值/扩展】

| 页面                        | 说明                                              | 优先级 |
|---------------------------|--------------------------------------------------|-------|
| MembershipPage             | 展示用户当前会员等级、成长值、开通/续费入口                  | P1 |
| PointsMallPage             | 使用积分兑换商品、优惠券等权益，展示剩余积分、兑换记录             | P2 |
| MembershipBenefitsPage     | 展示不同会员等级对应的专属权益、特权和解锁条件                  | P1 |
| CouponCenterPage           | 用户领取/管理优惠券，支持过期券查看与自动使用                   | P1 |
| FlashSalePage              | 展示限时秒杀活动列表，支持倒计时、库存状态等                     | P2 |
| GroupBuyPage               | 发起/参与拼团，展示拼团进度、参与人数等信息                      | P2 |

---

## ✅ 通用增强与优化建议 【P1/P2-增值/扩展】

| 模块/页面                  | 说明                                            | 优先级 |
|--------------------------|-----------------------------------------------|-------|
| NotificationRouter       | 实现点击通知直接跳转到相关详情页（如订单通知 → OrderDetailPage）  | P1 |
| LanguageSettingsPage     | 多语言支持，用户可在设置中切换语言                      | P2 |
| BehaviorTracking         | 埋点用户行为，追踪点击/浏览/转化路径等，用于产品分析           | P1 |
| ABTestingSupport         | 后台配置A/B测试方案，前端支持多种逻辑运行                  | P2 |
| RolePermissionMatrix     | 明确每种身份（用户/营养师/商家/员工）的页面访问与功能权限配置，保障数据隔离 | P0 |

---

## ✅ 实时通讯与互动功能 【P1-增值】

| 页面/功能                 | 说明                                         | 优先级 | 访问入口 |
|-------------------------|---------------------------------------------|-------|---------|
| ConsultationChatPage    | 营养师与用户之间的实时聊天界面，支持文字、图片（可拓展语音）           | P1 | 用户端：推荐详情/订单详情/个人中心<br>营养师端：咨询列表 |
| ChatStatusManager       | 管理消息已读/未读状态，支持标记、消息提醒数                  | P1 | - |
| VoiceMessageSupport     | 增加语音消息功能，提升咨询效率（可选实现）                   | P2 | - |

---

## ✅ 物流配送追踪功能 【P1-增值】

| 页面/功能                 | 说明                                         | 优先级 |
|-------------------------|---------------------------------------------|-------|
| DeliveryTrackingPage    | 实时展示配送员位置、预计送达时间、配送路线等信息          | P1 |
| DeliverymanContactPage  | 提供配送员联系方式，支持电话、在线聊天等沟通渠道         | P1 |

---

## ✅ 评价系统增强 【P1/P2-增值/扩展】

| 页面/功能                   | 说明                                         | 优先级 |
|---------------------------|---------------------------------------------|-------|
| DishReviewPage            | 单个菜品详细评价页面，展示用户评分、评论、图片等        | P2 |
| NutritionistRatingPage    | 营养师评分系统，展示服务评价、专业度评分、用户反馈等     | P1 |

---

## ✅ 数据分析增强 【P2-扩展】

| 页面/功能                      | 说明                                         | 优先级 |
|------------------------------|---------------------------------------------|-------|
| UserBehaviorAnalyticsPage    | 展示用户行为分析，包括浏览偏好、下单习惯、活跃时段等      | P2 |
| PickupStatsPage              | 后台取餐码统计页面，查看取餐率、平均取餐时间、异常情况等 | P2 |

---

## ✅ 社交功能 【P2-扩展】

| 页面/功能                  | 说明                                         | 优先级 |
|-------------------------|----------------------------------------------|-------|
| FriendListPage           | 好友列表管理，支持添加好友、查看好友动态、互相推荐等       | P2 |
| ShareMealPlanPage        | 分享餐饮计划，支持分享到社交平台、好友圈等             | P2 |

---

## ✅ 取餐码功能 【P1-增值】

| 页面/功能                    | 说明                                              | 优先级 |
|----------------------------|--------------------------------------------------|-------|
| PickupCodeGeneratorPage    | 商家端生成取餐码页面，支持批量生成、绑定订单             | P1 |
| PickupCodeDisplayPage      | 用户端展示取餐码，支持二维码、数字码两种形式              | P1 |
| PickupCodeScannerPage      | 商家端扫码核销页面，扫描用户取餐码完成取餐              | P1 |
| PickupCodeManagementPage   | 商家端取餐码管理，查看已使用/未使用状态、历史记录等         | P1 |

---

## 📊 审批流程图

### 角色申请审批流程
```
用户申请 → 后台初审(自动/人工) → 资质验证 → 最终审批 → 通知结果
   ↓                                              ↓
营养师：上传资格证                               通过：开通权限
商家：上传营业执照                               拒绝：说明原因
员工：商家邀请码                                 
配送员：身份验证
```

### 审批权限矩阵
| 申请类型 | 初审权限 | 终审权限 | 审批要点 |
|---------|---------|---------|---------|
| 营养师认证 | 运营管理员 | 运营主管 | 资格证真实性、从业经验 |
| 商家入驻 | 运营管理员 | 运营主管 | 营业执照、食品许可证 |
| 员工添加 | 商家自主 | - | 商家内部管理 |
| 配送员认证 | 运营管理员 | 运营主管 | 身份证、健康证 |

---

## 🧩 公共组件库

为提高开发效率和保持UI一致性，建议抽离以下公共组件：

| 组件名称                    | 说明                                              | 使用场景 |
|---------------------------|--------------------------------------------------|---------|
| MarketingActivityCard     | 营销活动通用卡片组件（优惠券、秒杀、拼团等）              | 首页、活动页、个人中心 |
| NutritionInfoCard         | 营养信息展示卡片（热量、蛋白质、脂肪等）                | 菜品详情、推荐结果 |
| UserAvatarWidget          | 用户头像组件，支持角色标识（营养师、商家等）              | 各处用户信息展示 |
| OrderStatusWidget         | 订单状态展示组件，统一状态样式                        | 订单列表、订单详情 |
| RatingStarWidget          | 评分星级组件                                        | 评价页面、详情页 |
| CountdownTimerWidget      | 倒计时组件                                          | 秒杀、拼团活动 |
| EmptyStateWidget          | 空状态展示组件                                       | 列表无数据时 |
| LoadingMoreWidget         | 加载更多组件                                        | 列表分页加载 |
| ErrorHandlingWidget       | 统一错误处理组件（网络错误、服务器错误、权限错误等）         | 所有页面错误处理 |
| RetryButtonWidget         | 重试操作组件                                        | 失败场景的重试入口 |
| NetworkStatusWidget       | 网络状态指示器                                      | 离线/弱网环境提示 |
| ToastMessageWidget        | 消息提示组件（成功、失败、警告等）                      | 操作反馈提示 |

---

## 🚨 全局异常处理与用户体验优化

### 1. 错误类型分类与处理策略

| 错误类型 | 触发场景 | 处理策略 | 用户感知 | 优先级 |
|---------|---------|---------|---------|-------|
| 网络连接错误 | 请求超时、断网 | 显示离线提示、缓存本地数据、自动重连 | 顶部横幅提示 | P0 |
| 服务器错误 | 5xx错误 | 显示友好提示、提供重试、记录错误日志 | 弹窗或页面提示 | P0 |
| 权限错误 | 401/403错误 | 引导重新登录、联系客服、权限说明 | 跳转登录页 | P0 |
| 数据格式错误 | 解析失败 | 降级显示、默认数据、上报错误 | 部分功能不可用 | P1 |
| 业务逻辑错误 | 库存不足、重复操作 | 具体业务提示、替代方案 | 即时反馈 | P0 |
| AI服务错误 | 推荐失败、超时 | 降级到历史推荐、手动选择 | 切换到备用方案 | P1 |

### 2. 关键页面容错机制

| 页面类型 | 容错设计 | 降级方案 |
|---------|---------|---------|
| 支付页面 | 支付状态轮询、超时重试、多支付方式备选 | 线下支付、延迟支付 |
| AI推荐页面 | 本地缓存历史推荐、手动搜索入口 | 热门推荐、分类浏览 |
| 列表页面 | 分页容错、本地缓存、空状态友好提示 | 显示缓存数据 |
| 表单页面 | 本地草稿保存、分步验证、字段容错 | 保存草稿、稍后继续 |

### 3. 用户引导与帮助机制

| 场景 | 引导策略 | 实现方式 |
|-----|---------|---------|
| 首次使用 | 功能引导、操作提示、演示动画 | OnboardingPage + 浮层提示 |
| 功能空状态 | 操作建议、示例内容、快速入口 | EmptyStateWidget + 引导按钮 |
| 错误恢复 | 原因说明、解决步骤、联系方式 | 错误页面 + 帮助链接 |
| 网络异常 | 网络检查、离线功能、稍后重试 | 网络状态检测 + 缓存机制 |

---

## 📱 多平台适配策略 【P2-扩展】

### 1. 平台适配矩阵

| 功能模块 | 移动端(Flutter) | 平板端 | Web端 | 一体机 | 适配要点 |
|---------|----------------|-------|-------|-------|---------|
| 用户端核心功能 | ✅ 主平台 | 📱→🖥️ 响应式 | 🌐 简化版 | ❌ | 触控优化、横竖屏切换 |
| 营养师工作台 | ✅ 移动办公 | ✅ 提升效率 | ✅ 首选平台 | ❌ | PC端多窗口、大屏展示 |
| 商家管理后台 | ⚠️ 基础功能 | ✅ 现场管理 | ✅ 完整功能 | ❌ | 数据录入、报表查看 |
| 员工点单系统 | ⚠️ 临时使用 | ✅ 主要平台 | ⚠️ 备用方案 | ✅ 固定设备 | 快速操作、防误触 |
| 后台管理系统 | ❌ | ⚠️ 查看数据 | ✅ 主平台 | ❌ | 复杂交互、大量数据 |

### 2. 响应式设计规范

| 设备类型 | 屏幕尺寸 | 布局特点 | 交互方式 | 关键适配 |
|---------|---------|---------|---------|---------|
| 手机竖屏 | 375-428px | 单列布局、底部导航 | 拇指操作区 | isPhonePortrait |
| 手机横屏 | 667-926px | 双列布局、侧边导航 | 双手操作 | supportsLandscape |
| 平板竖屏 | 768-834px | 卡片布局、侧边栏 | 精确触控 | isTabletPortrait |
| 平板横屏 | 1024-1366px | 多列布局、工具栏 | 键鼠+触控 | isTabletLandscape |
| 桌面Web | 1440px+ | 网格布局、多窗口 | 键鼠操作 | isDesktopOptimized |

### 3. 平台特性预留字段

```dart
class PageConfiguration {
  bool isTabletOptimized;     // 平板优化
  bool supportsLandscape;     // 横屏支持
  bool isDesktopOptimized;    // 桌面优化
  bool requiresKeyboard;      // 需要键盘
  bool supportsMouse;         // 鼠标支持
  String preferredPlatform;   // 推荐平台
}
```

---

## ✅ 最终效果：页面层+身份层统一，功能完整连贯

> 本文档补充完善了订单支付流程、菜品管理、用户通知与分析系统、物流配送、评价系统、数据分析、社交功能和取餐码功能，使页面结构更完整、业务闭环更清晰，支持未来 AI 分析与用户增长。

### 核心特点：
- **统一账号体系**：所有功能集中于一个账号，动态切换角色入口
- **身份无缝切换**：营养师/商家身份与用户账号合并，体验流畅
- **权限分级管理**：后台覆盖所有数据与权限管理，不同角色权限明确
- **导航逻辑清晰**：各端逻辑清晰、跳转合理、角色切换无缝
- **线上线下融合**：支持线上线下一体化运营，满足多种业务场景需求
- **分阶段实施**：P0/P1/P2优先级划分，支持MVP快速迭代
- **异常容错完备**：全面的错误处理机制，保障用户体验连续性
- **用户引导友好**：完善的新手引导和空状态处理，降低使用门槛
- **首页智能化**：动态模块设计，提升功能发现率和用户活跃度
- **数据驱动决策**：指标归因分析，支持精准运营和业务优化
- **多平台扩展**：预留适配方案，支持未来多设备场景
- **业务闭环完整**：配送端到客服系统的全链路业务覆盖
- **合规安全保障**：内容监管、数据导出、账号注销等合规功能
- **用户体验优化**：双向导航、客服多渠道、反馈机制完善
- **访客档案管理**：支持代创建档案和所有权转移，线下场景完备
- **订单异常保障**：完整的异常状态处理，降低运营风险
- **积分体系完善**：多场景积分使用，提升用户粘性和复购
- **社交传播支持**：内容分享和小程序跳转，助力用户增长