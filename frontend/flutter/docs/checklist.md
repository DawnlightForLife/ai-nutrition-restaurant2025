# 代码审查检查清单

本检查清单用于代码审查过程中，确保新加入的代码符合项目架构规范。

## 接口设计检查

- [ ] 接口名称使用`I`前缀（如`IUserRepository`）
- [ ] 接口遵循单一职责原则，功能聚焦
- [ ] 接口方法声明清晰，名称表达意图
- [ ] 接口方法参数和返回类型使用领域模型
- [ ] 接口注释完整，包含方法用途和参数说明

## 实现类检查

- [ ] 实现类名去掉接口名中的`I`前缀（如`UserRepository`实现`IUserRepository`）
- [ ] 类上方添加了`@Injectable`和`@lazySingleton`等适当注解
- [ ] 类通过构造函数注入依赖，依赖于接口而非实现
- [ ] 实现方法处理了成功和异常情况
- [ ] 私有方法和属性使用下划线`_`前缀
- [ ] 错误转换为领域错误，不暴露底层实现细节

## 用例检查

- [ ] 用例类实现单一业务流程
- [ ] 用例依赖于仓库接口，不依赖具体实现
- [ ] 用例参数类（如果有）清晰封装所需数据
- [ ] 用例实现了数据验证逻辑
- [ ] 用例使用`Result`类型封装结果
- [ ] 用例处理并转换异常为适当的错误类型
- [ ] 用例实现了`call`方法以便调用者使用

## Provider检查

- [ ] Provider类只负责UI状态管理
- [ ] Provider通过依赖注入获取用例实例
- [ ] Provider使用`notifyListeners`通知状态变化
- [ ] Provider正确处理加载状态和错误信息
- [ ] Provider方法命名清晰表达意图
- [ ] Provider不包含业务逻辑，仅协调用例调用

## 依赖注入检查

- [ ] 在`injection.dart`或相关文件中注册了新服务、仓库和用例
- [ ] 依赖注册使用接口类型，而非实现类型
- [ ] 依赖注册遵循依赖关系顺序
- [ ] 对单例和工厂实例使用了恰当的注册方法

## 命名规范检查

- [ ] 文件名使用小写字母和下划线（如`user_repository.dart`）
- [ ] 类名使用PascalCase（首字母大写，如`UserRepository`）
- [ ] 方法名使用camelCase（首字母小写，如`getUserProfile`）
- [ ] 常量名使用SCREAMING_SNAKE_CASE（全大写下划线，如`API_BASE_URL`）
- [ ] 变量名使用描述性命名，避免缩写和单字母

## 文档检查

- [ ] 类和公共方法有文档注释
- [ ] 复杂逻辑有行内注释说明
- [ ] 参数、返回值和异常有说明
- [ ] 代码遵循项目统一的文档风格

## 测试检查

- [ ] 用例有单元测试
- [ ] 测试覆盖了成功和失败场景
- [ ] 测试使用模拟对象隔离依赖
- [ ] 测试断言验证了关键行为
- [ ] 测试名称清晰描述测试场景和预期结果
- [ ] 测试结构遵循测试金字塔原则
- [ ] 单元测试覆盖了所有公共方法
- [ ] 组件测试验证了UI渲染和用户交互
- [ ] 集成测试验证了多个组件协作
- [ ] 端到端测试覆盖了关键用户流程
- [ ] 使用了适当的测试工具（Mockito、Flutter Test等）
- [ ] 测试代码组织到正确的测试目录中
- [ ] 测试遵循AAA(Arrange-Act-Assert)模式
- [ ] 测试没有不必要的依赖和硬编码值

---

## 功能实现流程检查

当实现新功能模块时，确保按照以下顺序完成：

1. [ ] 领域模型定义完成
2. [ ] 服务和仓库接口设计完成
3. [ ] 服务实现完成
4. [ ] 仓库实现完成
5. [ ] 用例实现完成
6. [ ] 依赖注入配置完成
7. [ ] Provider实现完成
8. [ ] UI组件实现完成
9. [ ] 测试实现完成
   - [ ] 模型单元测试
   - [ ] 仓库单元测试
   - [ ] 服务单元测试
   - [ ] 用例单元测试
   - [ ] UI组件测试
   - [ ] 页面集成测试
   - [ ] 端到端流程测试

## 提交前最终检查

- [ ] 代码符合项目架构规范
- [ ] 未包含调试代码和注释掉的代码
- [ ] 所有测试通过
- [ ] 代码风格一致（使用linter检查）
- [ ] 性能问题已评估和处理 