# 文档结构冻结说明 (DOCS_FREEZE.md)

**版本:** 1.0  
**状态:** 已冻结  
**更新日期:** 2025-05-17  
**编制人:** 系统架构组

## 📑 目录

- [1. 概述](#1-概述)
- [2. 设计原则](#2-设计原则)
- [3. 目录结构](#3-目录结构)
- [4. 文档模块详情](#4-文档模块详情)
  - [4.1 API文档 (api/)](#41-api文档-api)
  - [4.2 数据模型文档 (models/)](#42-数据模型文档-models)
  - [4.3 枚举常量文档 (enums/)](#43-枚举常量文档-enums)
  - [4.4 业务流程文档 (workflows/)](#44-业务流程文档-workflows)
  - [4.5 子系统文档 (subsystems/)](#45-子系统文档-subsystems)
  - [4.6 集成对接文档 (integrations/)](#46-集成对接文档-integrations)
  - [4.7 变更记录与导航入口](#47-变更记录与导航入口)
- [5. 冻结范围](#5-冻结范围)
- [6. 更新与维护](#6-更新与维护)

## 1. 概述

本文档定义了智能营养餐厅系统的文档结构，包括API接口说明、数据模型描述、常量定义、业务流程、子系统说明和第三方集成等内容。规范化的文档体系是确保系统可理解性、可维护性和团队协作的关键，为开发、测试和后续迭代提供可靠参考。

文档层作为系统知识沉淀的关键载体，其结构冻结对保障知识管理的稳定性和一致性至关重要。

## 2. 设计原则

- **分层组织原则**: 文档按功能领域分组，形成清晰层次
- **职责单一原则**: 每类文档专注于特定知识点，避免内容重叠
- **接口分离原则**: API文档与实现说明分离，便于前后端协作
- **一致性原则**: 文档风格、格式和组织保持一致
- **可演化原则**: 文档结构支持内容扩展，但保持组织稳定
- **最新化原则**: 关键文档与代码同步更新，保持最新状态
- **关联引用原则**: 相关文档间建立清晰引用关系

## 3. 目录结构

文档系统采用以下目录结构：

```
/backend/docs/
├── api/                                 # 所有接口说明
│   ├── auth.md                          # 登录、注册、验证码、OAuth 接口
│   ├── nutrition.md                     # 营养档案、AI推荐接口
│   ├── order.md                         # 下单、支付、订阅管理接口
│   ├── consult.md                       # 营养咨询相关接口
│   ├── forum.md                         # 帖子、评论、点赞接口
│   ├── user.md                          # 用户信息、资料更新、头像等接口
│   ├── merchant.md                      # 商家信息、菜品、门店接口
│   ├── notification.md                  # 消息通知获取与状态更新接口
│   └── admin.md                         # 管理员端权限、角色、审计接口
│
├── models/                              # 模型字段说明
│   ├── userModel.md                     # 用户模型字段用途与示例
│   ├── nutritionProfileModel.md         # 营养档案字段说明
│   ├── recommendationModel.md           # 推荐结构字段说明
│   └── schemaRelations.md               # 模型间关系说明（如一对多）
│
├── enums/                               # 系统常量定义说明
│   ├── roles.md                         # 用户/营养师/商家/管理员角色含义
│   ├── merchantTypes.md                 # 商家类型分类（健身房/月子中心等）
│   ├── subscriptionPlans.md             # 套餐周期、价格、功能说明
│   ├── notificationTypes.md             # 系统通知类型编码说明
│   └── genderOptions.md                 # 性别与年龄段分类定义
│
├── workflows/                           # 核心业务流程文档
│   ├── user_onboarding.md               # 用户注册 → 填档案 → 获取推荐流程
│   ├── merchant_lifecycle.md            # 商家入驻 → 上架 → 管理订单流程
│   └── consult_feedback_loop.md         # 咨询 → AI反馈 → 推荐迭代闭环
│
├── subsystems/                          # 系统工具/子平台说明
│   ├── query-evolution-system.md        # 查询演化评分系统文档
│   └── domain-driven-design.md          # 领域驱动设计架构说明
│
├── integrations/                        # 第三方平台或工具接入文档
│   ├── swagger-openapi.yaml             # OpenAPI 结构文档（供生成 Swagger）
│   └── postman-export.json              # Postman 导出 JSON（用于团队调试）
│
├── CHANGELOG.md                         # 每次接口字段变更记录
└── README.md                            # 文档总览与导航入口
```

## 4. 文档模块详情

### 4.1 API文档 (api/)

**用途**: 详细描述系统所有对外API接口的使用方法、参数要求和返回值格式，是前后端开发和测试的主要参考依据。

| 文件名 | 用途说明 | Swagger/Postman绑定 | 维护状态 | 冻结状态 |
|-------|---------|-------------------|---------|---------|
| **auth.md** | 登录、注册、验证码、OAuth认证接口说明 | ✅ Swagger绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **nutrition.md** | 营养档案创建、查询、AI推荐接口说明 | ✅ Swagger绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **order.md** | 下单、支付、订阅管理接口说明 | ✅ Swagger绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **consult.md** | 营养咨询预约、历史查询、反馈接口说明 | ✅ Swagger绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **forum.md** | 帖子发布、评论、点赞、搜索接口说明 | ✅ Swagger绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **user.md** | 用户信息获取、资料更新、头像管理接口说明 | ✅ Swagger绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **merchant.md** | 商家信息、菜品管理、门店管理接口说明 | ✅ Swagger绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **notification.md** | 消息通知获取与状态更新接口说明 | ✅ Swagger绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **admin.md** | 管理员权限管理、角色设置、审计接口说明 | ✅ Swagger绑定 | 🔄 定期维护 | ✅ 已冻结 |

**文档模式**: 每个API文档采用统一的结构，包含以下部分：
- 接口概述与使用场景
- 请求方法、URL和权限要求
- 请求参数详细说明（路径参数、查询参数、请求体）
- 成功响应示例与字段解释
- 错误响应码与含义
- 接口调用示例(curl/请求示例)

**冻结说明**: 结构已冻结，建议文档仅扩展不重构目录结构

### 4.2 数据模型文档 (models/)

**用途**: 详细描述系统数据模型的字段定义、数据类型、约束条件和关联关系，为开发人员提供数据存储和访问的参考。

| 文件名 | 用途说明 | Swagger/Postman绑定 | 维护状态 | 冻结状态 |
|-------|---------|-------------------|---------|---------|
| **userModel.md** | 用户模型字段用途与示例说明 | ❌ 无绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **nutritionProfileModel.md** | 营养档案字段与数据类型说明 | ❌ 无绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **recommendationModel.md** | 推荐结果的结构与字段说明 | ❌ 无绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **schemaRelations.md** | 所有模型间的关系与关联方式说明 | ❌ 无绑定 | ⚠️ 架构变更时更新 | ✅ 已冻结 |

**文档模式**: 每个模型文档采用统一的结构，包含以下部分：
- 模型用途与业务场景
- 字段列表（名称、类型、必填性、默认值）
- 字段详细说明与取值范围
- 模型间关系说明
- 索引设计与性能考量
- 示例数据

**冻结说明**: 结构已冻结，建议文档仅扩展不重构目录结构

### 4.3 枚举常量文档 (enums/)

**用途**: 详细描述系统中使用的所有枚举类型、状态码和固定常量，为开发和测试提供数据一致性参考。

| 文件名 | 用途说明 | Swagger/Postman绑定 | 维护状态 | 冻结状态 |
|-------|---------|-------------------|---------|---------|
| **roles.md** | 用户/营养师/商家/管理员角色含义说明 | ❌ 无绑定 | ⚠️ 角色新增时更新 | ✅ 已冻结 |
| **merchantTypes.md** | 商家类型分类及其业务含义说明 | ❌ 无绑定 | ⚠️ 类型新增时更新 | ✅ 已冻结 |
| **subscriptionPlans.md** | 套餐周期、价格、功能对应关系说明 | ❌ 无绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **notificationTypes.md** | 系统通知类型编码与触发场景说明 | ❌ 无绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **genderOptions.md** | 性别与年龄段分类定义说明 | ❌ 无绑定 | ⚠️ 分类扩展时更新 | ✅ 已冻结 |

**文档模式**: 每个枚举文档采用统一的结构，包含以下部分：
- 枚举用途与业务含义
- 枚举值列表（编码、显示名、英文标识）
- 各枚举值详细解释
- 前端展示建议
- 使用场景示例

**冻结说明**: 结构已冻结，建议文档仅扩展不重构目录结构

### 4.4 业务流程文档 (workflows/)

**用途**: 详细描述系统核心业务流程的步骤、参与角色和状态变化，为理解复杂业务场景提供指导。

| 文件名 | 用途说明 | Swagger/Postman绑定 | 维护状态 | 冻结状态 |
|-------|---------|-------------------|---------|---------|
| **user_onboarding.md** | 用户注册→填档案→获取推荐流程说明 | ❌ 无绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **merchant_lifecycle.md** | 商家入驻→上架→管理订单流程说明 | ❌ 无绑定 | 🔄 定期维护 | ✅ 已冻结 |
| **consult_feedback_loop.md** | 咨询→AI反馈→推荐迭代闭环说明 | ❌ 无绑定 | 🔄 定期维护 | ✅ 已冻结 |

**文档模式**: 每个流程文档采用统一的结构，包含以下部分：
- 流程概述与业务背景
- 流程图（步骤可视化）
- 参与角色与职责
- 详细步骤说明
- 状态转换规则
- 异常处理方案
- 实现参考（涉及接口和模型）

**冻结说明**: 结构已冻结，建议文档仅扩展不重构目录结构

### 4.5 子系统文档 (subsystems/)

**用途**: 详细描述系统中特定功能模块或子系统的架构设计、工作原理和使用方法。

| 文件名 | 用途说明 | Swagger/Postman绑定 | 维护状态 | 冻结状态 |
|-------|---------|-------------------|---------|---------|
| **query-evolution-system.md** | 查询演化评分系统工作原理与使用说明 | ❌ 无绑定 | ⚠️ 系统变更时更新 | ✅ 已冻结 |
| **domain-driven-design.md** | 领域驱动设计架构与实现说明 | ❌ 无绑定 | �� 定期维护 | ✅ 已冻结 |

**文档模式**: 每个子系统文档采用统一的结构，包含以下部分：
- 系统概述与设计目标
- 架构设计与组件说明
- 工作流程与原理解析
- 配置与使用方法
- 维护与故障排除
- 扩展与优化建议

**冻结说明**: 结构已冻结，建议文档仅扩展不重构目录结构

### 4.6 集成对接文档 (integrations/)

**用途**: 提供与第三方系统或工具集成所需的技术规范、配置方法和示例。

| 文件名 | 用途说明 | Swagger/Postman绑定 | 维护状态 | 冻结状态 |
|-------|---------|-------------------|---------|---------|
| **swagger-openapi.yaml** | OpenAPI规范文档（供生成Swagger界面） | ✅ Swagger引用 | 🔄 随API更新 | ✅ 已冻结 |
| **postman-export.json** | Postman集合导出文件（供团队接口调试） | ✅ Postman引用 | 🔄 随API更新 | ✅ 已冻结 |

**集成文件用途**:
- swagger-openapi.yaml: 集成所有API接口定义，用于自动生成API文档界面和客户端代码
- postman-export.json: 包含预配置的API请求集合，便于开发人员快速测试和调试

**冻结说明**: 结构已冻结，建议文档仅随API变更更新内容

### 4.7 变更记录与导航入口

**用途**: 提供文档系统的总体导航和变更历史记录，便于跟踪和理解系统演进。

| 文件名 | 用途说明 | Swagger/Postman绑定 | 维护状态 | 冻结状态 |
|-------|---------|-------------------|---------|---------|
| **CHANGELOG.md** | 接口字段变更记录（按时间倒序） | ❌ 无绑定 | 🔄 持续更新 | ✅ 格式已冻结 |
| **README.md** | 文档系统总览与导航入口 | ❌ 无绑定 | 🔄 定期维护 | ✅ 已冻结 |

**文档特点**:
- CHANGELOG.md: 记录所有API和模型的变更历史，包括新增、修改和废弃的字段或接口，按版本和日期组织
- README.md: 作为文档系统入口，提供总体概述、使用指南和各部分的导航链接

**冻结说明**: 结构已冻结，内容持续维护

## 5. 冻结范围

以下文档系统内容被定义为冻结状态：

1. **目录结构**
   - 顶级目录的组织方式和分类逻辑
   - 各模块下文档的命名和分组规则

2. **文档模版格式**
   - 各类文档的组织结构和主要章节
   - 模版中的标准部分（如请求/响应格式）

3. **API文档划分方式**
   - 按功能域划分的API文档结构
   - API样例和错误码呈现方式

4. **集成文件格式**
   - Swagger和Postman文件的结构和组织
   - 接口集合的分组逻辑

## 6. 更新与维护

尽管文档系统结构已冻结，但以下内容需要持续更新：

1. **定期更新内容**
   - API描述和参数说明（随功能变化）
   - 模型字段和枚举值（随数据结构变化）
   - 业务流程细节（随流程优化变化）
   - 集成文件内容（随接口变化）

2. **变更管理流程**
   - 所有API变更必须同步更新文档
   - 重大变更需在CHANGELOG中记录
   - 变更必须保持文档结构一致性
   - README需定期检查更新

3. **文档扩展原则**
   - 新功能模块可在现有结构下添加文档
   - 保持与已有文档格式和风格一致
   - 必要时可增加新的子目录，但需保持分类逻辑一致
   - 所有新增文档应在README中添加导航链接

---
⚠️ **注意**: 本文档定义的文档结构已冻结，未经架构委员会批准，不得更改文档组织架构和目录结构。所有文档更新和扩展应在现有结构框架内进行。 