等待数据库连接完成...
Mongoose默认连接已打开
数据库连接已就绪
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 User 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 模型 User 注册成功
2025-06-23 16:20:58 [[32MINFO[39M]: 模型 User 是构造函数，可以使用new User()
User模型类型: function
User模型已成功导出为构造函数
User模型被其他模块引用，确保导出正确类型
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 UserRole 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 Admin 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 Nutritionist 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 Merchant 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 模型 Merchant 注册成功
2025-06-23 16:20:58 [[32MINFO[39M]: 模型 Merchant 是构造函数，可以使用new Merchant()
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 Dish 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 Order 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 AiRecommendation 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 Subscription 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 AuditLog 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 使用内存缓存模式，未配置Redis
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 DataAccessControl 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 ForumPost 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 ForumComment 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 ForumTag 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 Consultation 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 MerchantStats 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 模型 MerchantStats 注册成功
2025-06-23 16:20:58 [[32MINFO[39M]: 模型 MerchantStats 是构造函数，可以使用new MerchantStats()
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 StoreDish 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 Store 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 UserFavorite 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 DbMetrics 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 模型 DbMetrics 注册成功
2025-06-23 16:20:58 [[32MINFO[39M]: 模型 DbMetrics 是构造函数，可以使用new DbMetrics()
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 Notification 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 OAuthAccount 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 UsageLog 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 UserNotificationStatus 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 ExportTask 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 FileUpload 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 Session 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 UserPermission 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 PermissionHistory 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 模型工厂已启用缓存
(node:72955) [MONGOOSE] Warning: `collection` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass `suppressReservedKeysWarning` as a schema option.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:72955) [MONGOOSE] Warning: `collection` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass `suppressReservedKeysWarning` as a schema option.
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 SystemConfig 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 告警系统监控已启动
2025-06-23 16:20:58 [[32MINFO[39M]: 实时告警系统已初始化
🔒 权限缓存服务已初始化
🔥 开始预热权限缓存...
🔒 角色权限已缓存: customer, 权限数量: 7
🔒 角色权限已缓存: store_manager, 权限数量: 17
🔒 角色权限已缓存: store_staff, 权限数量: 9
🔒 角色权限已缓存: nutritionist, 权限数量: 10
🔥 权限缓存预热完成，已缓存 4 个角色
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 DietaryPreference 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 模型 DietaryPreference 注册成功
2025-06-23 16:20:58 [[32MINFO[39M]: 模型 DietaryPreference 是构造函数，可以使用new DietaryPreference()
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 NutritionistClient 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 NutritionPlan 的类型: function
2025-06-23 16:20:58 [[32MINFO[39M]: 连接池自动扩缩功能已启用，检查间隔： {"0":"秒"}
2025-06-23 16:20:58 [[32MINFO[39M]: 异步连接池管理器已创建
2025-06-23 16:20:58 [[32MINFO[39M]: 读取一致性服务已初始化，默认级别： {"0":"S","1":"E","2":"S","3":"S","4":"I","5":"O","6":"N"}
2025-06-23 16:20:58 [[32MINFO[39M]: 分布式事务服务已初始化，但未启用
2025-06-23 16:20:58 [[32MINFO[39M]: 请求重试服务已初始化
Hook registered for event: nutritionist.certification.submitted
Hook registered for event: nutritionist.certification.reviewed
Hook registered for event: nutritionist.certification.expired
2025-06-23 16:20:58 [[32MINFO[39M]: 创建模型 IngredientInventory 的类型: function
2025-06-23T08:20:58.992Z [INFO]: 使用内存缓存服务 
2025-06-23 16:20:59 [[32MINFO[39M]: Handlebars模板引擎加载成功
2025-06-23 16:20:59 [[32MINFO[39M]: SchemaJsonConverter服务已初始化 {"service":"SchemaJsonConverter"}
2025-06-23 16:20:59 [[32MINFO[39M]: 动态模型加载服务已创建 {"service":"DynamicModelLoader","enableSandbox":true,"enableGrayRelease":false,"grayReleasePercentage":10,"nodeId":"node-8768","nodeGroup":"default"}
2025-06-23 16:20:59 [[32MINFO[39M]: 正在初始化动态模型加载服务... {"service":"DynamicModelLoader"}
2025-06-23 16:20:59 [[32MINFO[39M]: 已初始化 49 个现有模型 {"service":"DynamicModelLoader"}
🔧 开发环境认证路由已加载
2025-06-23 16:20:59 [[32MINFO[39M]: 已设置模型文件监视器，监视目录: ./models {"service":"DynamicModelLoader"}
2025-06-23 16:20:59 [[32MINFO[39M]: 动态模型加载服务初始化完成 {"service":"DynamicModelLoader"}
缓存服务已初始化
分片服务已初始化
2025-06-23 16:20:59 [[32MINFO[39M]: 动态模型加载服务已成功初始化
数据分片服务已初始化
2025-06-23 16:20:59 [[32MINFO[39M]: 使用单一数据库连接
数据库连接池已初始化
2025-06-23 16:20:59 [[32MINFO[39M]: 初始化数据库优化管理器...
2025-06-23 16:20:59 [[32MINFO[39M]: 缓存服务已初始化
2025-06-23 16:20:59 [[32MINFO[39M]: 数据库优化管理器初始化完成
2025-06-23 16:20:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 16:20:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
数据库优化服务已初始化
2025-06-23 16:20:59 [[32MINFO[39M]: 创建断路器: db-operations
🔄 正在初始化定时任务...
📝 已注册定时任务: cleanupExpiredData, 执行计划: 0 3 * * *
📝 已注册定时任务: updateCache, 执行计划: 0 * * * *
📝 已注册定时任务: dbStats, 执行计划: 0 2 * * *
📝 已注册定时任务: autoReorder, 执行计划: 0 */6 * * *
📝 已注册定时任务: expiryAlert, 执行计划: 0 8,20 * * *
▶️ 已启动定时任务: cleanupExpiredData
▶️ 已启动定时任务: updateCache
▶️ 已启动定时任务: dbStats
▶️ 已启动定时任务: autoReorder
▶️ 已启动定时任务: expiryAlert
✅ 已初始化 5 个定时任务
定时任务系统已初始化
所有服务初始化完成
WebSocket服务已初始化
服务器在端口 3000 上运行 (监听所有接口)
2025-06-23 16:20:59 [[32MINFO[39M]: Redis连接成功
2025-06-23 16:21:22 [[31MERROR[39M]: ❌ API错误: E11000 duplicate key error collection: ai-nutrition-restaurant.users index: phone_1 dup key: { phone: "13812345678" } E11000 duplicate key error collection: ai-nutrition-restaurant.users index: phone_1 dup key: { phone: "13812345678" } {"index":0,"code":11000,"keyPattern":{"phone":1},"keyValue":{"phone":"13812345678"},"stack":"MongoServerError: E11000 duplicate key error collection: ai-nutrition-restaurant.users index: phone_1 dup key: { phone: \"13812345678\" }\n    at /Volumes/workSpace/smart_nutrition_restaurant/ai-nutrition-restaurant2025/backend/node_modules/mongodb/lib/operations/insert.js:50:33\n    at /Volumes/workSpace/smart_nutrition_restaurant/ai-nutrition-restaurant2025/backend/node_modules/mongodb/lib/operations/command.js:84:64\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}
2025-06-23 16:21:22 [[31MERROR[39M]: ❌ API错误: 密码错误 密码错误 {"statusCode":401,"stack":"Error: 密码错误\n    at Object.login (/Volumes/workSpace/smart_nutrition_restaurant/ai-nutrition-restaurant2025/backend/services/user/authService.js:323:21)\n    at async exports.login (/Volumes/workSpace/smart_nutrition_restaurant/ai-nutrition-restaurant2025/backend/controllers/user/authController.js:31:22)"}
[AUTH DEBUG] 开始处理令牌验证
[AUTH DEBUG] 提取到令牌，长度: 277
[AUTH DEBUG] 使用密钥验证令牌: you...
[AUTH DEBUG] 令牌验证成功，用户ID: 68590e960b57e36cce3cecc9
🔒 用户权限已缓存: 68590e960b57e36cce3cecc9, 权限数量: 10
[AUTH DEBUG] 用户信息和权限设置完成，角色: nutritionist 权限数量: 10
[AUTH DEBUG] 开始处理令牌验证
[AUTH DEBUG] 提取到令牌，长度: 277
[AUTH DEBUG] 使用密钥验证令牌: you...
[AUTH DEBUG] 令牌验证成功，用户ID: 68590e960b57e36cce3cecc9
[AUTH DEBUG] 用户信息和权限设置完成，角色: nutritionist 权限数量: 10
[AUTH DEBUG] 开始处理令牌验证
[AUTH DEBUG] 提取到令牌，长度: 277
[AUTH DEBUG] 使用密钥验证令牌: you...
[AUTH DEBUG] 令牌验证成功，用户ID: 68590e960b57e36cce3cecc9
[AUTH DEBUG] 用户信息和权限设置完成，角色: nutritionist 权限数量: 10
[AUTH DEBUG] 开始处理令牌验证
[AUTH DEBUG] 提取到令牌，长度: 277
[AUTH DEBUG] 使用密钥验证令牌: you...
[AUTH DEBUG] 令牌验证成功，用户ID: 68590e960b57e36cce3cecc9
[AUTH DEBUG] 用户信息和权限设置完成，角色: nutritionist 权限数量: 10
[AUTH DEBUG] 开始处理令牌验证
[AUTH ERROR] 未提供Authorization头或格式不正确: undefined
2025-06-23 16:21:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:22:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
[AUTH DEBUG] 开始处理令牌验证
[AUTH DEBUG] 提取到令牌，长度: 277
[AUTH DEBUG] 使用密钥验证令牌: you...
[AUTH DEBUG] 令牌验证成功，用户ID: 68590e960b57e36cce3cecc9
[AUTH DEBUG] 用户信息和权限设置完成，角色: nutritionist 权限数量: 10
2025-06-23T08:23:08.996Z [ERROR]: 获取营养师统计失败 {"error":{},"nutritionistId":"68590e960b57e36cce3cecc9","options":{}}
[AUTH DEBUG] 开始处理令牌验证
[AUTH DEBUG] 提取到令牌，长度: 277
[AUTH DEBUG] 使用密钥验证令牌: you...
[AUTH DEBUG] 令牌验证成功，用户ID: 68590e960b57e36cce3cecc9
[AUTH DEBUG] 用户信息和权限设置完成，角色: nutritionist 权限数量: 10
[AUTH DEBUG] 开始处理令牌验证
[AUTH DEBUG] 提取到令牌，长度: 277
[AUTH DEBUG] 使用密钥验证令牌: you...
[AUTH DEBUG] 令牌验证成功，用户ID: 68590e960b57e36cce3cecc9
[AUTH DEBUG] 用户信息和权限设置完成，角色: nutritionist 权限数量: 10
[AUTH DEBUG] 开始处理令牌验证
[AUTH DEBUG] 提取到令牌，长度: 277
[AUTH DEBUG] 使用密钥验证令牌: you...
[AUTH DEBUG] 令牌验证成功，用户ID: 68590e960b57e36cce3cecc9
[AUTH DEBUG] 用户信息和权限设置完成，角色: nutritionist 权限数量: 10
[AUTH DEBUG] 开始处理令牌验证
[AUTH ERROR] 未提供Authorization头或格式不正确: undefined
2025-06-23 16:23:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:24:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:25:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:25:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 16:25:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 16:26:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:27:58 [[33MWARN[39M]: [告警] CPU使用率过高: 84.8% {"metric":"cpu","value":0.847552644026276,"threshold":0.7}
2025-06-23 16:27:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:28:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:29:58 [[33MWARN[39M]: [告警] CPU使用率过高: 89.0% {"metric":"cpu","value":0.890421878746632,"threshold":0.7}
2025-06-23 16:29:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:30:58 [[33MWARN[39M]: [告警] CPU使用率过高: 76.2% {"metric":"cpu","value":0.7618040988065935,"threshold":0.7}
2025-06-23 16:30:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:30:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 16:30:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 16:31:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:32:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 93.5% {"metric":"cpu","value":0.9352277790685068,"threshold":0.9}
2025-06-23 16:32:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:33:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 90.7% {"metric":"cpu","value":0.9070878576370209,"threshold":0.9}
2025-06-23 16:33:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:34:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:35:58 [[33MWARN[39M]: [告警] CPU使用率过高: 82.7% {"metric":"cpu","value":0.8272241793020751,"threshold":0.7}
2025-06-23 16:35:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:35:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 16:35:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 16:36:58 [[33MWARN[39M]: [告警] CPU使用率过高: 76.3% {"metric":"cpu","value":0.7634154278186518,"threshold":0.7}
2025-06-23 16:36:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:37:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:38:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:39:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 96.1% {"metric":"cpu","value":0.9612522156342207,"threshold":0.9}
2025-06-23 16:39:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:40:58 [[33MWARN[39M]: [告警] CPU使用率过高: 87.9% {"metric":"cpu","value":0.8787659792970803,"threshold":0.7}
2025-06-23 16:40:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:40:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 16:40:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 16:41:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 99.0% {"metric":"cpu","value":0.9900225404937515,"threshold":0.9}
2025-06-23 16:41:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:42:58 [[33MWARN[39M]: [告警] CPU使用率过高: 85.0% {"metric":"cpu","value":0.8501671018669945,"threshold":0.7}
2025-06-23 16:42:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:43:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:44:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:45:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:45:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 16:45:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 16:46:58 [[33MWARN[39M]: [告警] CPU使用率过高: 88.0% {"metric":"cpu","value":0.8800454949851089,"threshold":0.7}
2025-06-23 16:46:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:47:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:48:58 [[33MWARN[39M]: [告警] CPU使用率过高: 89.8% {"metric":"cpu","value":0.8981597581681464,"threshold":0.7}
2025-06-23 16:48:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:49:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:50:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:50:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 16:50:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 16:51:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:52:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:53:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:54:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 96.9% {"metric":"cpu","value":0.9686366718925874,"threshold":0.9}
2025-06-23 16:54:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:55:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:55:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 16:55:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 16:56:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:57:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 96.8% {"metric":"cpu","value":0.967640890036713,"threshold":0.9}
2025-06-23 16:57:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:58:58 [[33MWARN[39M]: [告警] CPU使用率过高: 86.1% {"metric":"cpu","value":0.8608083944320328,"threshold":0.7}
2025-06-23 16:58:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 16:59:58 [[33MWARN[39M]: [告警] CPU使用率过高: 71.2% {"metric":"cpu","value":0.7123439429301746,"threshold":0.7}
2025-06-23 16:59:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
⏰ [2025-06-23T09:00:00.794Z] 执行定时任务: updateCache
♻️ [2025-06-23T09:00:00.795Z] 开始更新缓存数据...
✅ [2025-06-23T09:00:00.795Z] 缓存数据更新完成
✅ [2025-06-23T09:00:00.795Z] 定时任务完成: updateCache, 耗时: 1ms
2025-06-23 17:00:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:00:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:00:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:01:58 [[33MWARN[39M]: [告警] CPU使用率过高: 77.8% {"metric":"cpu","value":0.7783859422498014,"threshold":0.7}
2025-06-23 17:01:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:02:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:03:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:04:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:05:58 [[33MWARN[39M]: [告警] CPU使用率过高: 80.2% {"metric":"cpu","value":0.801922994583858,"threshold":0.7}
2025-06-23 17:05:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:05:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:05:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:06:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:07:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:08:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:09:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 95.9% {"metric":"cpu","value":0.958676860073356,"threshold":0.9}
2025-06-23 17:09:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:10:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:10:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:10:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:11:58 [[33MWARN[39M]: [告警] CPU使用率过高: 83.5% {"metric":"cpu","value":0.8349877858020187,"threshold":0.7}
2025-06-23 17:11:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:12:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:13:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:14:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:15:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:15:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:15:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:16:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:17:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:18:58 [[33MWARN[39M]: [告警] CPU使用率过高: 80.0% {"metric":"cpu","value":0.7996075793372903,"threshold":0.7}
2025-06-23 17:18:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:19:58 [[33MWARN[39M]: [告警] CPU使用率过高: 89.0% {"metric":"cpu","value":0.8899353213277128,"threshold":0.7}
2025-06-23 17:19:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:20:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:20:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:20:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:21:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 97.0% {"metric":"cpu","value":0.9698020157173084,"threshold":0.9}
2025-06-23 17:21:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:22:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:23:58 [[33MWARN[39M]: [告警] CPU使用率过高: 71.4% {"metric":"cpu","value":0.7140664873574225,"threshold":0.7}
2025-06-23 17:23:58 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:24:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:25:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:25:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:25:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:26:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:27:58 [[33MWARN[39M]: [告警] CPU使用率过高: 83.4% {"metric":"cpu","value":0.8339199630600898,"threshold":0.7}
2025-06-23 17:27:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:28:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:29:58 [[33MWARN[39M]: [告警] CPU使用率过高: 87.9% {"metric":"cpu","value":0.8789131915980453,"threshold":0.7}
2025-06-23 17:29:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:30:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:30:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:30:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:31:58 [[33MWARN[39M]: [告警] CPU使用率过高: 85.1% {"metric":"cpu","value":0.8508737562627495,"threshold":0.7}
2025-06-23 17:31:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:32:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:33:58 [[33MWARN[39M]: [告警] CPU使用率过高: 82.2% {"metric":"cpu","value":0.8219711394697873,"threshold":0.7}
2025-06-23 17:33:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:34:58 [[33MWARN[39M]: [告警] CPU使用率过高: 88.8% {"metric":"cpu","value":0.8879360148721474,"threshold":0.7}
2025-06-23 17:34:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:35:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:35:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:35:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:36:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:37:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:38:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:39:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:40:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:40:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:40:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:41:58 [[33MWARN[39M]: [告警] CPU使用率过高: 72.3% {"metric":"cpu","value":0.723001452555202,"threshold":0.7}
2025-06-23 17:41:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:42:58 [[33MWARN[39M]: [告警] CPU使用率过高: 82.3% {"metric":"cpu","value":0.823465557686508,"threshold":0.7}
2025-06-23 17:42:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:43:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:44:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 97.7% {"metric":"cpu","value":0.976791211133273,"threshold":0.9}
2025-06-23 17:44:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:45:58 [[33MWARN[39M]: [告警] CPU使用率过高: 74.6% {"metric":"cpu","value":0.7463982250235748,"threshold":0.7}
2025-06-23 17:45:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:45:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:45:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:46:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:47:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:48:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:49:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:50:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:50:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:50:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:51:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:52:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:53:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:54:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:55:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 17:55:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 17:55:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:56:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:57:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:58:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 17:59:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
⏰ [2025-06-23T10:00:00.759Z] 执行定时任务: updateCache
♻️ [2025-06-23T10:00:00.759Z] 开始更新缓存数据...
✅ [2025-06-23T10:00:00.759Z] 缓存数据更新完成
✅ [2025-06-23T10:00:00.759Z] 定时任务完成: updateCache, 耗时: 0ms
⏰ [2025-06-23T10:00:00.759Z] 执行定时任务: autoReorder
[AutoReorderJob] 开始执行自动补货检查...
[AutoReorderJob] 处理完成: 检查0个库存，生成0个补货建议
✅ [2025-06-23T10:00:00.777Z] 定时任务完成: autoReorder, 耗时: 18ms
2025-06-23 18:00:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 18:00:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 18:00:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:01:58 [[33MWARN[39M]: [告警] CPU使用率过高: 83.9% {"metric":"cpu","value":0.8393612407642592,"threshold":0.7}
2025-06-23 18:01:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:02:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 95.0% {"metric":"cpu","value":0.9503935466142999,"threshold":0.9}
2025-06-23 18:02:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:03:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:04:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:05:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 18:05:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 18:05:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:06:58 [[33MWARN[39M]: [告警] CPU使用率过高: 76.8% {"metric":"cpu","value":0.7675623320430083,"threshold":0.7}
2025-06-23 18:06:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:07:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:08:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 92.1% {"metric":"cpu","value":0.9210964905738921,"threshold":0.9}
2025-06-23 18:08:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:09:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:10:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 18:10:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 18:10:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:11:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:12:58 [[31MERROR[39M]: [告警] CPU使用率严重超标: 96.8% {"metric":"cpu","value":0.9675960231316814,"threshold":0.9}
2025-06-23 18:12:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:13:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:14:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:15:58 [[33MWARN[39M]: [告警] CPU使用率过高: 80.7% {"metric":"cpu","value":0.8066670039094122,"threshold":0.7}
2025-06-23 18:15:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 18:15:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 18:15:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:16:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:17:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:18:58 [[33MWARN[39M]: [告警] CPU使用率过高: 74.4% {"metric":"cpu","value":0.7444034429027522,"threshold":0.7}
2025-06-23 18:18:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:19:58 [[33MWARN[39M]: [告警] CPU使用率过高: 72.2% {"metric":"cpu","value":0.7217280981699867,"threshold":0.7}
2025-06-23 18:19:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
2025-06-23 18:20:59 [[32MINFO[39M]: 开始数据库优化服务健康检查...
2025-06-23 18:20:59 [[32MINFO[39M]: 数据库优化服务健康检查完成
2025-06-23 18:20:59 [[32MINFO[39M]: 连接池利用率低 (0.00), 缩容到 10
